$(function(){var i={data:{py:"",zh:"",sex:"boy",v:"v1"},$box:$("#j_nameFormBox"),validator:null,init:function(){var i=this,t=this.$box.find(".charatorBox > .sex"),o=this.$box.find(".charatorBox > .charatorPopBox"),a=null;this.validator=new App.FormValidator({$form:this.$box.find(".nameForm")}),$(document).on("click",function(i){$(i.target).is(t)||$(i.target).is(o)||o.hide()}),t.on("click",function(){var r=$(this),n=r.siblings(".charatorPopBox");i.data.sex=r.attr("sex"),r.hasClass("ui-button-gray")?(r.removeClass("ui-button-gray"),t.not(r).addClass("ui-button-gray"),o.hide(),n.show(),a=n[0]):(n.show(),a=n[0])}),o.on("click",".picBox",function(){$(this).addClass("active").siblings(".picBox").removeClass("active"),o.hide(),i.data.v=$(this).attr("key")}),this.$box.on("click","#j_submitBtn",function(){var t=i.validator.validate();if(t.FAILED)App.tip(t.msg,"error");else{if(/[^a-zA-Z\s]$/.test(t.py))return App.tip("请填写正确的名字拼音","error"),void i.validator.setInvalid(i.$box.find(".j_pyInput"));if(!App.BookData.checkValid(t.py))return App.tip("抱歉，暂不支持你的名字拼音","error"),void i.validator.setInvalid(i.$box.find(".j_pyInput"));i.data.py=t.py,i.data.zh=t.zh,App.linkTo("/book/preview.jsp",i.data)}})}},t={init:function(){new App.SimpleSlider({$sliderBox:$(".j_commentSliderBox")}),new App.SimpleSlider({$sliderBox:$(".j_introSliderBox")}),i.init()}};t.init()});