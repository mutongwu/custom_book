define("modules/nameRoleForm/index",function(i,r,o){function t(i){this.config=$.extend({},i),this._id=(new Date).getTime(),this.init()}t.prototype={init:function(){this.style(),this.dom(),this.event();var i=this.config.$container,r=i.find(".charatorBox > .sex");i.find(".j_pyInput").val(this.config.py),i.find(".j_zhInput").val(this.config.zh),r.addClass("ui-button-gray");var o=r.filter('.sex[sex="'+this.config.sex+'"]');o.removeClass("ui-button-gray"),o.siblings(".charatorPopBox").find('.picBox[key="'+this.config.v+'"]').click()},event:function(){var i=this,r=this.config.$container,o=r.find(".charatorBox > .sex"),t=r.find(".charatorBox > .charatorPopBox");$(document).on("click.hideRolePop",function(i){$(i.target).is(o)||$(i.target).is(t)||t.hide()}),o.on("click",function(){var r=$(this),s=r.siblings(".charatorPopBox");i.config.sex=r.attr("sex"),r.hasClass("ui-button-gray")?(r.removeClass("ui-button-gray"),o.not(r).addClass("ui-button-gray"),t.hide(),s.show()):s.show()}),t.on("click",".picBox",function(){$(this).addClass("active").siblings(".picBox").removeClass("active"),t.hide(),i.config.v=$(this).attr("key")})},validate:function(){var i=this.config.$container.find(".nameForm");this.validator||(this.validator=new App.FormValidator({$form:i}));var r=validator.validate();return r.FAILED?(App.tip(r.msg,"error"),null):/[^a-zA-Z\s]$/.test(r.py)?(App.tip("请填写正确的名字拼音","error"),void this.validator.setInvalid(i.find(".j_pyInput"))):App.BookData.checkValid(r.py)?(r.v=this.config.v,r.sex=this.config.sex,r):(App.tip("抱歉，暂不支持你的名字拼音","error"),void this.validator.setInvalid(i.find(".j_pyInput")))},dom:function(){var i='\r\n<div class="nameFormBox vertical-form">\r\n    \r\n    <form class="nameForm tc">\r\n        <div>\r\n            <div class="fieldBox cf">\r\n                <input type="text" name="cn_name" placeholder="中文名字"  class="fl item tc ui-input j_pyInput" maxlength="16" />\r\n                <input type="text" name="py_name" placeholder="名字拼音"  class="fl item tc ui-input j_zhInput" maxlength="16" />\r\n            </div>\r\n        </div>\r\n\r\n        <div class="fieldBox cf">\r\n            <div class="fl item charatorBox">\r\n    <div class="sex ui-button ui-button-XL" sex="boy">男孩</div>\r\n    <div class="charatorPopBox ui-arrow-box ui-arrow-box-gray border-radius size-xl">\r\n        <div class="contentBox cf">\r\n            <div class="picBox fl active" key="v1">\r\n                <img class="charator" src="//www.sy111.com/book/static/images/core/boy1.jpg"/>\r\n            </div>\r\n            <div class="picBox fl " key="v2">\r\n                <img class="charator" src="//www.sy111.com/book/static/images/core/boy2.jpg"/>\r\n            </div>\r\n            <div class="picBox fl " key="v3">\r\n                <img class="charator" src="//www.sy111.com/book/static/images/core/boy3.jpg"/>\r\n            </div>\r\n        </div>\r\n        <div class="ui-arrow ui-arrow-up">\r\n           <em>◆</em><i>◆</i>\r\n        </div>\r\n    </div>\r\n</div>\r\n            <div class="fl item charatorBox">\r\n    <div class="sex ui-button ui-button-gray ui-button-XL" sex="girl">女孩</div>\r\n    <div class="charatorPopBox ui-arrow-box ui-arrow-box-gray border-radius size-xl">\r\n        <div class="contentBox cf">\r\n            <div class="picBox fl active" key="v1">\r\n                <img class="charator" src="//www.sy111.com/book/static/images/core/girl1.jpg"/>\r\n            </div>\r\n            <div class="picBox fl "  key="v2">\r\n                <img class="charator" src="//www.sy111.com/book/static/images/core/girl2.jpg"/>\r\n            </div>\r\n            <div class="picBox fl "  key="v3">\r\n                <img class="charator" src="//www.sy111.com/book/static/images/core/girl3.jpg"/>\r\n            </div>\r\n        </div>\r\n        <div class="ui-arrow ui-arrow-up">\r\n           <em>◆</em><i>◆</i>\r\n        </div>\r\n    </div>    \r\n</div>\r\n        </div>\r\n    </form>\r\n</div>';this.domId=this._id+"_dom",this.config.$container.append('<div id="'+this.domId+'">'+i+"</div>")},style:function(){var i="";this.styleId=this._id+"_style",this.config.$container.append('<style id="'+this.styleId+'">'+i+"</style>")},destroy:function(){$(document).off("click.hideRolePop"),this.validator&&this.validator.destroy(),this.config.$container.empty(),this.config=null}},o.exports=t});